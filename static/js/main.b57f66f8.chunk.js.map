{"version":3,"sources":["components/SidePanel/Waypoint/delete-icon.svg","context/positionContext.js","components/SidePanel/Waypoint/drag-icon.svg","components/SidePanel/Waypoint/Waypoint.js","components/SidePanel/SidePanel.js","utils/gpxFileWriter.js","components/Map/Map.js","App.js","index.js"],"names":["_path","initialState","positions","reducer","state","action","type","value","filter","position","PositionContext","createContext","PositionContextProvider","children","useReducer","dispatch","addPosition","deletePosition","Provider","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgDeleteIcon","_ref","svgRef","title","titleId","props","xmlns","viewBox","ref","id","d","ForwardRef","SvgDragIcon","Waypoint","useContext","useState","waypoints","setWaypoints","useEffect","map","item","className","data-testid","onClick","e","event","updatedWaypoints","p","handleDelete","SidePanel","hasMarkers","url","gpxTrack","forEach","lat","lng","createGPXFile","href","download","Map","mapElement","useRef","L","current","center","zoom","scrollWheelZoom","layers","tileLayer","attribution","on","latlng","layer","layerGroup","addTo","polyline","updateMarkers","remove","clearLayers","marker","icon","index","divIcon","html","App","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b57f66f8.chunk.js","sourcesContent":["var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDeleteIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDeleteIcon);\nexport default __webpack_public_path__ + \"static/media/delete-icon.982494dc.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useReducer, createContext} from 'react';\n\nconst initialState = {\n  positions: []\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_POSITION':\n      return {positions: [...state.positions, action.value]}\n    case 'DELETE_POSITION':\n      return {positions: [...state.positions.filter(position => position !== action.value)]}\n    default:\n      return state;\n  }\n};\n\nexport const PositionContext = createContext();\n\nexport const PositionContextProvider = ({children}) => {\n  let [state, dispatch] = useReducer(reducer, initialState);\n\n  const value = {\n    positions: state.positions,\n    addPosition: value => {\n      dispatch({type: 'ADD_POSITION', value})\n    },\n    deletePosition: value => {\n      dispatch({type: 'DELETE_POSITION', value})\n    }\n  };\n\n  return (\n    <PositionContext.Provider value={value}>\n      {children}\n    </PositionContext.Provider>\n  );\n};","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDragIcon(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDragIcon);\nexport default __webpack_public_path__ + \"static/media/drag-icon.97b3ff35.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useEffect, useContext, useState} from 'react';\nimport {ReactComponent as DeleteIcon} from './delete-icon.svg';\nimport {ReactComponent as DragIcon} from './drag-icon.svg';\nimport {PositionContext} from '../../../context/positionContext';\nimport './waypoint.css';\n\nconst Waypoint = () => {\n  const {positions, deletePosition} = useContext(PositionContext);\n  const [waypoints, setWaypoints] = useState(positions);\n\n  useEffect(() => {\n    setWaypoints(positions)\n  }, [positions])\n\n  const handleDelete = (event, item) => {\n    const updatedWaypoints = [...waypoints.filter(p => p !== item)]\n    setWaypoints(updatedWaypoints);\n    deletePosition(item);\n  }\n\n  return (\n    (waypoints && waypoints.length > 0) ?\n      (waypoints.map((item, i) => {\n        return <div key={i} className=\"waypoint-item\" data-testid=\"waypoint\">\n          <div><DragIcon className=\"drag-icon\"/> Waypoint {i + 1}</div>\n          <div><DeleteIcon id={i} className=\"delete-icon\" title=\"Remove Waypoint\" onClick={e => handleDelete(e, item)}/></div>\n        </div>\n      })\n    ) : null\n  )\n}\n\nexport default Waypoint;","import React, {useContext} from 'react';\nimport Waypoint from './Waypoint/Waypoint';\nimport {PositionContext} from '../../context/positionContext';\nimport {createGPXFile} from '../../utils/gpxFileWriter';\nimport './sidePanel.css'\n\nconst SidePanel = () => {\n  const {positions} = useContext(PositionContext);\n  const hasMarkers = positions && positions.length > 0;\n  const url = hasMarkers ? createGPXFile(positions) : null;\n\n  return (\n    <div className=\"panel-container\" data-testid=\"panel\">\n      <h1>Route Builder</h1>\n      <div className=\"waypoint-container\">\n        {hasMarkers && <Waypoint/>}\n      </div>\n      <a className={`download-btn ${!url ? 'disabled': ''}`} href={url} download=\"route.gpx\">Download your Route</a>\n    </div>\n  );\n};\n\nexport default SidePanel;","export const createGPXFile = (positions) => {\n  let gpxTrack;\n  let gpxStart = `<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\" ?>\n  <gpx xmlns=\"https://www.topografix.com/GPX/1/1\" version=\"1.1\" \n  xmlns:xsi=\"https://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"https://www.topografix.com/GPX/1/1 \n  https://www.topografix.com/GPX/1/1/gpx.xsd\"><trk><trkseg>`;\n  let gpxEnd = '</trkseg></trk></gpx>';\n\n  positions.forEach(item => {\n    gpxTrack += `<trkpt lat=\"${item.lat}\" lon=\"${item.lng}\"></trkpt>`;\n  })\n\n  const gpxFile = `${gpxStart}${gpxTrack}${gpxEnd}`;\n\n  return 'data:text/json;charset=utf-8,' + gpxFile;\n}","import React, {useEffect, useContext, useRef} from 'react';\nimport L, {divIcon} from 'leaflet';\nimport {PositionContext} from '../../context/positionContext';\nimport './map.css';\n\nconst Map = () => {\n  const mapElement = useRef(null);\n  const {positions, addPosition} = useContext(PositionContext);\n\n  useEffect(() => {\n    let map = L.map(mapElement.current, {\n      center: [46.360521, 13.7988974],\n      zoom: 13,\n      scrollWheelZoom: false,\n      layers: [L.tileLayer(\"http://{s}.tile.osm.org/{z}/{x}/{y}.png\", {\n        attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n      })]\n    });\n\n    map.on('click', (e) => {\n      addPosition(e.latlng)\n    });\n\n    let layer = L.layerGroup().addTo(map);\n\n    if (positions && positions.length > 0 ) {\n      L.polyline(positions, {}).addTo(map);\n      updateMarkers(layer, map, positions);\n    }\n\n    return () => {\n      if (map) {\n        map.remove();\n      }\n    };\n  }, [positions]);\n\n\n  const markerStyles = (index) => {\n    return divIcon({html: `<span class=\"marker\">${index}</span>`})\n  }\n\n  const updateMarkers = (layer, map, positions) => {\n    layer.clearLayers();\n    positions.map((item, i) => {\n      return L.marker(item, {icon: markerStyles(i + 1)}).addTo(map);\n    });\n  }\n\n  return (\n    <>\n      <div className=\"map\" ref={mapElement} data-testid=\"map\"/>\n    </>\n  );\n}\n\nexport default Map;","import {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom';\nimport {PositionContextProvider} from './context/positionContext';\nimport SidePanel from './components/SidePanel/SidePanel';\nimport Map from './components/Map/Map';\nimport './App.css';\n\nconst App = () => {\n  return (\n    <PositionContextProvider>\n      <Router>\n        <Switch>\n          <Route path=\"/route-planner\">\n            <div className=\"grid\">\n              <SidePanel/>\n            </div>\n            <div className=\"grid\">\n              <Map/>\n            </div>\n          </Route>\n        </Switch>\n      </Router>\n    </PositionContextProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}